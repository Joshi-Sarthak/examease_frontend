<div class="container">
  <!-- Header with Title and Logout Button -->
  <header class="header-bar">
    <h1 class="app-title">My Classrooms</h1>
    <button class="logout-btn" (click)="logout()">Logout</button>
  </header>

  <!-- Section Header -->
  <h2 class="section-header">Your Classrooms</h2>

  <!-- Classroom Cards Grid -->
  <div class="cards-grid">
    <div
      class="card"
      *ngFor="let classroom of classrooms"
      (click)="openClassroom(classroom)"
    >
      <div class="card-header">
        <h3 class="card-title">{{ classroom.classroomName }}</h3>
        <div class="dropdown-wrapper">
          <button
            class="dropdown-btn"
            (click)="
              $event.stopPropagation(); toggleDropdown(classroom.classroomId)
            "
          >
            ⋮
          </button>
          <div
            *ngIf="dropdownOpen === classroom.classroomId"
            class="dropdown-menu"
          >
            <button
              *ngIf="classroom.teacherId === user.userId"
              class="dropdown-item"
              (click)="
                copyClassroomCode(classroom.classroomCode); closeDropdown()
              "
            >
              📋 Copy Code
            </button>
            <button
              *ngIf="classroom.teacherId === user.userId"
              class="dropdown-item delete"
              (click)="
                confirmDeleteClassroom(classroom.classroomId); closeDropdown()
              "
            >
              🗑️ Delete Classroom
            </button>
            <button
              *ngIf="classroom.teacherId !== user.userId"
              class="dropdown-item"
              (click)="leaveClassroom(classroom.classroomId); closeDropdown()"
            >
              🚪 Leave Classroom
            </button>
          </div>
        </div>
      </div>
      <p class="card-subtext">
        <span *ngIf="classroom.teacherId === user.userId">Created by You</span>
        <span *ngIf="classroom.teacherId !== user.userId"
          >Created by: {{ classroom.teacherName }}</span
        >
      </p>
      <p class="card-subtext" *ngIf="classroom.teacherId === user.userId">
        Code: <span class="code-text">{{ classroom.classroomCode }}</span>
      </p>
    </div>
  </div>

  <!-- Fixed Action Buttons -->
  <div class="fixed-buttons">
    <button class="action-btn" (click)="toggleCreatePrompt()">
      Create Classroom
    </button>
    <button class="action-btn" (click)="toggleJoinPrompt()">
      Join Classroom
    </button>
  </div>

  <!-- Create Classroom Prompt -->
  <div class="prompt-overlay" *ngIf="showCreatePrompt">
    <div class="prompt-container">
      <h3>Create Classroom</h3>
      <input
        type="text"
        [(ngModel)]="classroomName"
        placeholder="Enter classroom name"
      />
      <div class="prompt-buttons">
        <button (click)="createClassroom()">Submit</button>
        <button (click)="cancelCreate()">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Join Classroom Prompt -->
  <div class="prompt-overlay" *ngIf="showJoinPrompt">
    <div class="prompt-container">
      <h3>Join Classroom</h3>
      <input
        type="text"
        [(ngModel)]="classroomCode"
        placeholder="Enter classroom code"
      />
      <div class="prompt-buttons">
        <button (click)="joinClassroom()">Submit</button>
        <button (click)="cancelJoin()">Cancel</button>
      </div>
    </div>
  </div>
</div>
